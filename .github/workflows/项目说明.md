# 📱 学习平台 Android APP 项目说明

## 📁 项目概述

这是一个基于 WebView 的 Android 应用，将在线学习平台网站（http://www.52xuexi.art）封装成原生 Android APP。

**创建时间**: 2025-10-13  
**版本**: 1.0.0  
**项目位置**: `/home/learning-platform-android`

---

## 🎯 功能特性

### ✅ 已实现功能

1. **核心功能**
   - 完整的 WebView 封装
   - 自动保存登录状态（Cookie、LocalStorage）
   - JavaScript 完全支持
   - 视频播放（支持全屏）
   - 文件下载

2. **交互优化**
   - 下拉刷新
   - 返回键导航（网页内返回）
   - 双击退出应用
   - 外部链接浏览器打开

3. **权限管理**
   - 网络权限
   - 存储权限（用于文件下载）
   - 自动请求必要权限

4. **安全配置**
   - 支持 HTTP/HTTPS 混合内容
   - 网络安全配置
   - Deep Link 支持

---

## 📦 项目结构

```
learning-platform-android/
├── app/                                    # 应用模块
│   ├── src/main/
│   │   ├── java/com/learningplatform/
│   │   │   └── MainActivity.kt            # 主Activity（核心逻辑）
│   │   ├── res/
│   │   │   ├── layout/
│   │   │   │   └── activity_main.xml     # 主布局文件
│   │   │   ├── values/
│   │   │   │   ├── strings.xml           # 字符串资源
│   │   │   │   ├── colors.xml            # 颜色定义
│   │   │   │   └── themes.xml            # 应用主题
│   │   │   ├── xml/
│   │   │   │   ├── network_security_config.xml  # 网络安全
│   │   │   │   └── file_paths.xml        # 文件路径配置
│   │   │   └── mipmap-*/                 # 应用图标（各分辨率）
│   │   └── AndroidManifest.xml           # 应用清单
│   ├── build.gradle                       # 应用级构建配置
│   └── proguard-rules.pro                 # 代码混淆规则
├── gradle/wrapper/                        # Gradle Wrapper
│   └── gradle-wrapper.properties         # Gradle版本配置
├── build.gradle                           # 项目级构建配置
├── settings.gradle                        # 项目设置
├── gradle.properties                      # Gradle属性
├── gradlew                                # Gradle启动脚本（Linux）
├── build.sh                               # 自动构建脚本
├── README.md                              # 完整文档
├── 快速开始.md                            # 快速开始指南
└── 项目说明.md                            # 本文件
```

---

## 🔧 核心文件说明

### MainActivity.kt
主要的 Activity 类，包含：
- WebView 初始化和配置
- JavaScript 支持
- 文件下载处理
- 权限管理
- 返回键处理
- 状态保存和恢复

**关键配置**:
```kotlin
private val BASE_URL = "http://www.52xuexi.art"  // 网站地址（可修改）
```

### AndroidManifest.xml
应用清单文件，定义：
- 应用权限
- 主Activity
- 应用图标和名称
- Deep Link 配置
- FileProvider 配置

### build.gradle (应用级)
构建配置，包括：
- 应用ID: `com.learningplatform`
- 最低支持: Android 5.0 (API 21)
- 目标版本: Android 13 (API 33)
- 依赖库配置

---

## 🛠️ 技术栈

### 开发语言
- **Kotlin**: 主要开发语言
- **XML**: 布局和资源文件

### 核心组件
- **WebView**: 网页容器
- **SwipeRefreshLayout**: 下拉刷新
- **DownloadManager**: 文件下载

### 依赖库
```gradle
androidx.core:core-ktx:1.9.0
androidx.appcompat:appcompat:1.6.1
com.google.android.material:material:1.8.0
androidx.constraintlayout:constraintlayout:2.1.4
androidx.swiperefreshlayout:swiperefreshlayout:1.1.0
androidx.webkit:webkit:1.6.0
```

### 构建工具
- **Gradle**: 7.5
- **Android Gradle Plugin**: 7.4.0
- **Kotlin**: 1.8.0

---

## 📋 构建要求

### 必需环境
1. **JDK 11+**
   ```bash
   java -version  # 检查版本
   ```

2. **Android SDK** (可选，如使用Android Studio)
   - SDK Platform 33
   - Build Tools 33.0.0

### 构建方法

#### 方法1: 使用自动脚本（推荐）
```bash
cd /home/learning-platform-android
./build.sh debug    # 或 ./build.sh release
```

#### 方法2: 使用 Gradle
```bash
./gradlew assembleDebug    # Debug版本
./gradlew assembleRelease  # Release版本
```

#### 方法3: 使用 Android Studio
```
File → Open → 选择项目目录
Build → Build Bundle(s) / APK(s) → Build APK(s)
```

---

## 📱 APK 输出

### Debug 版本
**位置**: `app/build/outputs/apk/debug/app-debug.apk`

**特点**:
- 未混淆，体积较大
- 可调试
- 签名使用 debug key
- 适合开发测试

### Release 版本
**位置**: `app/build/outputs/apk/release/app-release-unsigned.apk`

**特点**:
- 已混淆，体积较小
- 性能优化
- 未签名（需要签名后才能发布）
- 适合正式发布

---

## 🔐 签名配置

### 生成签名密钥
```bash
keytool -genkey -v -keystore my-release-key.jks \
  -keyalg RSA -keysize 2048 -validity 10000 \
  -alias learning-platform
```

### 签名 APK
```bash
jarsigner -verbose -sigalg SHA256withRSA -digestalg SHA-256 \
  -keystore my-release-key.jks \
  app/build/outputs/apk/release/app-release-unsigned.apk \
  learning-platform
```

---

## 🎨 自定义配置

### 修改应用名称
文件: `app/src/main/res/values/strings.xml`
```xml
<string name="app_name">你的应用名称</string>
```

### 修改网站URL
文件: `app/src/main/java/com/learningplatform/MainActivity.kt`
```kotlin
private val BASE_URL = "http://你的域名.com"
```

### 修改包名
1. 编辑 `app/build.gradle`:
   ```gradle
   applicationId "com.你的包名"
   ```

2. 重命名代码包目录

3. 更新 `MainActivity.kt` 的 package 声明

### 修改应用图标
替换以下文件:
```
app/src/main/res/mipmap-hdpi/ic_launcher.png      (72x72)
app/src/main/res/mipmap-mdpi/ic_launcher.png      (48x48)
app/src/main/res/mipmap-xhdpi/ic_launcher.png     (96x96)
app/src/main/res/mipmap-xxhdpi/ic_launcher.png    (144x144)
app/src/main/res/mipmap-xxxhdpi/ic_launcher.png   (192x192)
```

---

## 📊 构建统计

### 预计构建时间
- **首次构建**: 5-10分钟（需下载依赖）
- **后续构建**: 30秒-2分钟

### APK 大小
- **Debug版本**: 约 5-8 MB
- **Release版本**: 约 3-5 MB

### 支持设备
- **最低版本**: Android 5.0 (API 21)
- **目标版本**: Android 13 (API 33)
- **兼容性**: 99%+ Android 设备

---

## ✅ 功能检查清单

构建完成后，测试以下功能：

- [ ] APP 可以正常安装
- [ ] 启动后能加载网站首页
- [ ] 可以正常登录
- [ ] 视频可以播放
- [ ] 文件可以下载
- [ ] 下拉可以刷新
- [ ] 返回键可以后退
- [ ] 外部链接在浏览器打开
- [ ] 登录状态能保持

---

## 🚀 发布流程

1. **构建 Release APK**
   ```bash
   ./build.sh release
   ```

2. **签名 APK**
   ```bash
   # 使用密钥签名
   ```

3. **测试 APK**
   - 在多个设备上测试
   - 检查所有功能

4. **准备应用商店资料**
   - 应用图标（512x512）
   - 应用截图（至少2张）
   - 应用描述
   - 隐私政策

5. **上传到应用商店**
   - Google Play
   - 华为应用市场
   - 小米应用商店
   - 其他应用商店

---

## 📞 技术支持

### 常见问题
参见: `README.md` 的"常见问题"章节

### 构建日志
位置: `app/build/outputs/logs/`

### 错误排查
1. 检查 Java 版本
2. 检查网络连接
3. 清理并重新构建: `./gradlew clean`
4. 查看详细日志: `./gradlew assembleDebug --stacktrace`

---

## 📝 开发记录

### v1.0.0 (2025-10-13)
- ✅ 初始版本
- ✅ WebView 封装
- ✅ 基础功能实现
- ✅ 文件下载支持
- ✅ 视频播放支持

---

## 📄 许可证

本项目仅供学习使用。

---

## 🎉 总结

这是一个完整的、可直接使用的 Android WebView APP 项目。

**优点**:
- ✅ 开发快速（复用现有网站）
- ✅ 维护简单（网站更新，APP自动更新）
- ✅ 功能完整（支持所有网页功能）
- ✅ 体积小巧（3-8 MB）

**使用场景**:
- 将网站快速转换为APP
- 提供离线入口
- 提高用户体验
- 应用商店分发

---

**项目创建完成！准备好开始构建了！** 🚀

